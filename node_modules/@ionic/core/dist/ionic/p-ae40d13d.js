/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
import{d as n}from"./p-7b30edcc.js";import{OVERLAY_BACK_BUTTON_PRIORITY as o,shoudUseCloseWatcher as e}from"./p-4b2d5b9c.js";import{b as t,c as i}from"./p-1aa7c019.js";import{C as a}from"./p-a3f572a7.js";import{c as r,f as s,a as d,b as l,g as c}from"./p-b5839dc2.js";import{p as u}from"./p-06fee233.js";let p=0,m=0;const v=new WeakMap,f=n=>({create:o=>C(n,o),dismiss:(o,e,t)=>B(document,o,e,n,t),getTop:async()=>E(document,n)}),h=f("ion-alert"),b=f("ion-action-sheet"),w=f("ion-loading"),y=f("ion-modal"),g=f("ion-picker"),k=f("ion-popover"),x=f("ion-toast"),j=n=>{"undefined"!=typeof document&&P(document);const o=p++;n.overlayIndex=o},O=n=>(n.hasAttribute("id")||(n.id="ion-overlay-"+ ++m),n.id),C=(n,o)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(n).then((()=>{const e=document.createElement(n);return e.classList.add("overlay-hidden"),Object.assign(e,Object.assign(Object.assign({},o),{hasController:!0})),q(document).appendChild(e),new Promise((n=>r(e,n)))})):Promise.resolve(),D='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',T=(n,o)=>{let e=n.querySelector(D);const t=null==e?void 0:e.shadowRoot;t&&(e=t.querySelector(D)||e),e?s(e):o.focus()},A=(n,o)=>{const e=Array.from(n.querySelectorAll(D));let t=e.length>0?e[e.length-1]:null;const i=null==t?void 0:t.shadowRoot;i&&(t=i.querySelector(D)||t),t?t.focus():o.focus()},P=n=>{0===p&&(p=1,n.addEventListener("focus",(o=>{((n,o)=>{const e=E(o,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),t=n.target;e&&t&&(e.classList.contains("ion-disable-focus-trap")||(e.shadowRoot?(()=>{if(e.contains(t))e.lastFocus=t;else{const n=e.lastFocus;T(e,e),n===o.activeElement&&A(e,e),e.lastFocus=o.activeElement}})():(()=>{if(e===t)e.lastFocus=void 0;else{const n=c(e);if(!n.contains(t))return;const i=n.querySelector(".ion-overlay-wrapper");if(!i)return;if(i.contains(t)||t===n.querySelector("ion-backdrop"))e.lastFocus=t;else{const n=e.lastFocus;T(i,e),n===o.activeElement&&A(i,e),e.lastFocus=o.activeElement}}})()))})(o,n)}),!0),n.addEventListener("ionBackButton",(e=>{const t=E(n);(null==t?void 0:t.backdropDismiss)&&e.detail.register(o,(()=>{t.dismiss(void 0,_)}))})),e()||n.addEventListener("keydown",(o=>{if("Escape"===o.key){const o=E(n);(null==o?void 0:o.backdropDismiss)&&o.dismiss(void 0,_)}})))},B=(n,o,e,t,i)=>{const a=E(n,t,i);return a?a.dismiss(o,e):Promise.reject("overlay does not exist")},M=(n,o)=>((n,o)=>(void 0===o&&(o="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(n.querySelectorAll(o)).filter((n=>n.overlayIndex>0))))(n,o).filter((n=>!n.classList.contains("overlay-hidden"))),E=(n,o,e)=>{const t=M(n,o);return void 0===e?t[t.length-1]:t.find((n=>n.id===e))},G=(n=!1)=>{const o=q(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");o&&(n?o.setAttribute("aria-hidden","true"):o.removeAttribute("aria-hidden"))},I=async(n,o,e,a,r)=>{var s,d;if(n.presented)return;G(!0),n.presented=!0,n.willPresent.emit(),null===(s=n.willPresentShorthand)||void 0===s||s.emit();const l=t(n),c=n.enterAnimation?n.enterAnimation:i.get(o,"ios"===l?e:a);await z(n,c,n.el,r)&&(n.didPresent.emit(),null===(d=n.didPresentShorthand)||void 0===d||d.emit()),"ION-TOAST"!==n.el.tagName&&L(n.el),!n.keyboardClose||null!==document.activeElement&&n.el.contains(document.activeElement)||n.el.focus()},L=async n=>{let o=document.activeElement;if(!o)return;const e=null==o?void 0:o.shadowRoot;e&&(o=e.querySelector(D)||o),await n.onDidDismiss(),o.focus()},V=async(o,e,a,r,s,d,l)=>{var c,u;if(!o.presented)return!1;void 0!==n&&1===M(n).length&&G(!1),o.presented=!1;try{o.el.style.setProperty("pointer-events","none"),o.willDismiss.emit({data:e,role:a}),null===(c=o.willDismissShorthand)||void 0===c||c.emit({data:e,role:a});const n=t(o),p=o.leaveAnimation?o.leaveAnimation:i.get(r,"ios"===n?s:d);a!==H&&await z(o,p,o.el,l),o.didDismiss.emit({data:e,role:a}),null===(u=o.didDismissShorthand)||void 0===u||u.emit({data:e,role:a}),v.delete(o),o.el.classList.add("overlay-hidden"),o.el.style.removeProperty("pointer-events"),void 0!==o.el.lastFocus&&(o.el.lastFocus=void 0)}catch(n){console.error(n)}return o.el.remove(),!0},q=n=>n.querySelector("ion-app")||n.body,z=async(n,o,e,t)=>{e.classList.remove("overlay-hidden");const a=o(n.el,t);n.animated&&i.getBoolean("animated",!0)||a.duration(0),n.keyboardClose&&a.beforeAddWrite((()=>{const n=e.ownerDocument.activeElement;(null==n?void 0:n.matches("input,ion-input, ion-textarea"))&&n.blur()}));const r=v.get(n)||[];return v.set(n,[...r,a]),await a.play(),!0},F=(n,o)=>{let e;const t=new Promise((n=>e=n));return N(n,o,(n=>{e(n.detail)})),t},N=(n,o,e)=>{const t=i=>{l(n,o,t),e(i)};d(n,o,t)},S=n=>"cancel"===n||n===_,W=n=>n(),$=(n,o)=>{if("function"==typeof n)return i.get("_zoneGate",W)((()=>{try{return n(o)}catch(n){throw n}}))},_="backdrop",H="gesture",J=39,K=n=>{let o,e=!1;const t=a(),i=(i=!1)=>{if(o&&!i)return{delegate:o,inline:e};const{el:a,hasController:r,delegate:s}=n;return e=null!==a.parentNode&&!r,o=e?s||t:s,{inline:e,delegate:o}};return{attachViewToDom:async o=>{const{delegate:e}=i(!0);if(e)return await e.attachViewToDom(n.el,o);const{hasController:t}=n;if(t&&void 0!==o)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:o}=i();o&&void 0!==n.el&&o.removeViewFromDom(n.el.parentElement,n.el)}}},Q=()=>{let n;const o=()=>{n&&(n(),n=void 0)};return{addClickListener:(e,t)=>{o();const i=void 0!==t?document.getElementById(t):null;i?n=((n,o)=>{const e=()=>{o.present()};return n.addEventListener("click",e),()=>{n.removeEventListener("click",e)}})(i,e):u(`A trigger element with the ID "${t}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,e)},removeClickListener:o}};export{_ as B,H as G,J as O,h as a,b,k as c,K as d,Q as e,I as f,V as g,F as h,S as i,j,O as k,w as l,y as m,v as n,T as o,g as p,E as q,$ as s,x as t}